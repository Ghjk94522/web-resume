var U=Object.defineProperty;var h=Object.getOwnPropertySymbols;var A=Object.prototype.hasOwnProperty,V=Object.prototype.propertyIsEnumerable;var y=(e,t,r)=>t in e?U(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,S=(e,t)=>{for(var r in t||(t={}))A.call(t,r)&&y(e,r,t[r]);if(h)for(var r of h(t))V.call(t,r)&&y(e,r,t[r]);return e};import{l as d,E as H,e as b,R as T,U as R,M as w,a as P}from"./monaco.d34c9b32.js";import{I as q,C as c,S as u,D as C,b as x}from"./yamlWorker.591d481f.js";function M(e,t,r){const a=new Map,s=async o=>{const n=await r.provideMarkerData(o);!o.isDisposed()&&o.getLanguageId()===t&&e.editor.setModelMarkers(o,r.owner,n!=null?n:[])},i=o=>{if(o.getLanguageId()!==t)return;let n;a.set(String(o.uri),o.onDidChangeContent(()=>{clearTimeout(n),n=setTimeout(()=>{s(o)},500)})),s(o)},p=o=>{e.editor.setModelMarkers(o,r.owner,[]);const n=String(o.uri),m=a.get(n);m&&(m.dispose(),a.delete(n))},l=[e.editor.onDidCreateModel(i),e.editor.onWillDisposeModel(o=>{var n;p(o),(n=r.doReset)==null||n.call(r,o)}),e.editor.onDidChangeModelLanguage(o=>{var n;p(o.model),i(o.model),(n=r.doReset)==null||n.call(r,o.model)})];for(const o of e.editor.getModels())i(o);return{dispose(){for(const o of a.values())o.dispose();for(;l.length;)l.pop().dispose()}}}function _(e,t){let{createData:r,interval:a=3e4,label:s,moduleId:i,stopWhenIdleFor:p=12e4}=t,l,o,n=0,m=!1;const D=()=>{l&&(l.dispose(),l=void 0),o=void 0},O=setInterval(()=>{if(!l)return;Date.now()-n>p&&D()},a);return{dispose(){m=!0,clearInterval(O),D()},async getWorker(...k){if(m)throw new Error("Worker manager has been disposed");return n=Date.now(),o||(l=e.editor.createWebWorker({createData:r,label:s,moduleId:i}),o=l.getProxy()),await l.withSyncedResources(k),o},updateCreateData(k){r=k,D()}}}var g="yaml";function j(e){switch(e){case C.Error:return w.Error;case C.Warning:return w.Warning;case C.Information:return w.Info;case C.Hint:return w.Hint;default:return w.Info}}function z(e){switch(e){case x.Deprecated:return P.Deprecated;case x.Unnecessary:return P.Unnecessary}}function E(e){var t;return{severity:j(e.severity),startLineNumber:e.range.start.line+1,startColumn:e.range.start.character+1,endLineNumber:e.range.end.line+1,endColumn:e.range.end.character+1,message:e.message,code:String(e.code),source:e.source,tags:(t=e.tags)==null?void 0:t.map(z)}}function I(e){return{owner:g,async provideMarkerData(t){return(await(await e(t.uri)).doValidation(String(t.uri))).map(E)},async doReset(t){await(await e(t.uri)).resetSchema(String(t.uri))}}}function v(e){if(!!e)return{character:e.column-1,line:e.lineNumber-1}}function f(e){if(!!e)return new T(e.start.line+1,e.start.character+1,e.end.line+1,e.end.character+1)}function W(e){return{start:{line:e.startLineNumber-1,character:e.startColumn-1},end:{line:e.endLineNumber-1,character:e.endColumn-1}}}function B(e){return{message:e.message,range:W(e),code:typeof e.code=="object"?e.code.value:e.code,source:e.source}}function Y(e){const t=d.CompletionItemKind;switch(e){case c.Text:return t.Text;case c.Method:return t.Method;case c.Function:return t.Function;case c.Constructor:return t.Constructor;case c.Field:return t.Field;case c.Variable:return t.Variable;case c.Class:return t.Class;case c.Interface:return t.Interface;case c.Module:return t.Module;case c.Property:return t.Property;case c.Unit:return t.Unit;case c.Value:return t.Value;case c.Enum:return t.Enum;case c.Keyword:return t.Keyword;case c.Snippet:return t.Snippet;case c.Color:return t.Color;case c.File:return t.File;case c.Reference:return t.Reference;default:return t.Property}}function F(e){if(!!e)return{range:f(e.range),text:e.newText}}function $(e){return{triggerCharacters:[" ",":"],async provideCompletionItems(t,r){const a=t.uri,i=await(await e(a)).doComplete(String(a),v(r));if(!i)return;const p=t.getWordUntilPosition(r),l=new T(r.lineNumber,p.startColumn,r.lineNumber,p.endColumn),o=i.items.map(n=>{const m={label:n.label,insertText:n.insertText||n.label,sortText:n.sortText,filterText:n.filterText,documentation:n.documentation,detail:n.detail,kind:Y(n.kind),range:l};return n.textEdit&&(m.range=f("range"in n.textEdit?n.textEdit.range:n.textEdit.replace),m.insertText=n.textEdit.newText),n.additionalTextEdits&&(m.additionalTextEdits=n.additionalTextEdits.map(F)),n.insertTextFormat===q.Snippet&&(m.insertTextRules=d.CompletionItemInsertTextRule.InsertAsSnippet),m});return{incomplete:i.isIncomplete,suggestions:o}}}}function G(e){return{originSelectionRange:f(e.originSelectionRange),range:f(e.targetRange),targetSelectionRange:f(e.targetSelectionRange),uri:R.parse(e.targetUri)}}function J(e){return{async provideDefinition(t,r){const a=t.uri,i=await(await e(a)).doDefinition(String(a),v(r));return i==null?void 0:i.map(G)}}}function Q(e){return{async provideHover(t,r){const a=t.uri,i=await(await e(a)).doHover(String(a),v(r));if(!!i)return{range:f(i.range),contents:[{value:i.contents.value}]}}}}function X(e){const t=d.SymbolKind;switch(e){case u.File:return t.Array;case u.Module:return t.Module;case u.Namespace:return t.Namespace;case u.Package:return t.Package;case u.Class:return t.Class;case u.Method:return t.Method;case u.Property:return t.Property;case u.Field:return t.Field;case u.Constructor:return t.Constructor;case u.Enum:return t.Enum;case u.Interface:return t.Interface;case u.Function:return t.Function;case u.Variable:return t.Variable;case u.Constant:return t.Constant;case u.String:return t.String;case u.Number:return t.Number;case u.Boolean:return t.Boolean;case u.Array:return t.Array;default:return t.Function}}function L(e){return{detail:e.detail||"",range:f(e.range),name:e.name,kind:X(e.kind),selectionRange:f(e.selectionRange),children:e.children.map(L),tags:[]}}function Z(e){return{async provideDocumentSymbols(t){const r=t.uri,s=await(await e(r)).findDocumentSymbols(String(r));if(!!s)return s.map(L)}}}function ee(e){return S({tabSize:e.tabSize,insertSpaces:e.insertSpaces},e)}function te(e){return{async provideDocumentFormattingEdits(t,r){const a=t.uri,i=await(await e(a)).format(String(a),ee(r));if(!(!i||i.length===0))return i.map(F)}}}function re(e){return{range:f(e.range),tooltip:e.tooltip,url:e.target}}function ne(e){return{async provideLinks(t){const r=t.uri;return{links:(await(await e(r)).findLinks(String(r))).map(re)}}}}function oe(e){const t=[];for(const[r,a]of Object.entries(e.changes))for(const s of a)t.push({resource:R.parse(r),edit:{text:s.newText,range:f(s.range)}});return{edits:t}}function ae(e){var t;return{title:e.title,diagnostics:e.diagnostics.map(E),disabled:(t=e.disabled)==null?void 0:t.reason,edit:oe(e.edit),kind:e.kind,isPreferred:e.isPreferred}}function ie(e){return{async provideCodeActions(t,r,a){const s=t.uri;return{actions:(await(await e(s)).getCodeAction(String(s),W(r),a.markers.map(B))).map(ae),dispose(){}}}}}var se={comments:{lineComment:"#"},brackets:[["{","}"],["[","]"],["(",")"]],autoClosingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"}],surroundingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"}],onEnterRules:[{beforeText:/:\s*$/,action:{indentAction:d.IndentAction.Indent}}]};function ce(e){const t=_({editor:b},{label:"yaml",moduleId:"monaco-yaml/yaml.worker",createData:{languageSettings:e.diagnosticsOptions,enableSchemaRequest:e.diagnosticsOptions.enableSchemaRequest}});e.onDidChange(()=>{t.updateCreateData({languageSettings:e.diagnosticsOptions,enableSchemaRequest:e.diagnosticsOptions.enableSchemaRequest})}),d.registerCompletionItemProvider(g,$(t.getWorker)),d.registerHoverProvider(g,Q(t.getWorker)),d.registerDefinitionProvider(g,J(t.getWorker)),d.registerDocumentSymbolProvider(g,Z(t.getWorker)),d.registerDocumentFormattingEditProvider(g,te(t.getWorker)),d.registerLinkProvider(g,ne(t.getWorker)),d.registerCodeActionProvider(g,ie(t.getWorker)),d.setLanguageConfiguration(g,se);let r=M({editor:b},g,I(t.getWorker));e.onDidChange(()=>{r.dispose(),r=M({editor:b},g,I(t.getWorker))})}var K={completion:!0,customTags:[],enableSchemaRequest:!1,format:!0,isKubernetes:!1,hover:!0,schemas:[],validate:!0,yamlVersion:"1.2"};function ue(e){const t=new H;let r=e;const a={get onDidChange(){return t.event},get diagnosticsOptions(){return r},setDiagnosticsOptions(s){r=S(S({},K),s),t.fire(a)}};return a}var N=ue(K);d.register({id:g,extensions:[".yaml",".yml"],aliases:["YAML","yaml","YML","yml"],mimetypes:["application/x-yaml"]});d.onLanguage("yaml",()=>{ce(N)});function me(e={}){N.setDiagnosticsOptions(e)}export{ue as createLanguageServiceDefaults,me as setDiagnosticsOptions,N as yamlDefaults};
